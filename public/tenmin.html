<!doctype html>
<html>

<head>
    <title>Line Chart - 10 minutes</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
    <style type="text/css">
        #canvas-holder {
            background-color: #FFFFFF;
            position: absolute;
            top: 12px;
            left: 12px;
            right: 12px;
            bottom: 12px;
        }
    </style>
</head>

<body>
    <div id="canvas-holder">
        <canvas id="myChart"></canvas>
    </div>
    <br>
    <br>
    <script>
        async function getData() {
            const response = await fetch('/tenmin');
            const data = await response.json();
            return data;
        }

        async function plotIt() {
            const data = await getData();
            console.log(data);
            var ctx = document.getElementById("myChart").getContext("2d");
            var myChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: Object.keys(data),
                    datasets: [{
                            label: "Fermentador 1",
                            data: Object.values(data),
                            borderColor: 'rgb(255, 99, 132)'
                        },
                        {
                            label: "Fermentador 2",
                            data: [100, 200, 300, 200, 300],
                            borderColor: 'rgb(255, 255, 132)'
                        }
                    ]
                },
                options: {
                    title: {
                        display: true,
                        text: 'Ãšltimos 10 minutos'
                    },
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
        }

        plotIt();
    </script>
</body>

</html>